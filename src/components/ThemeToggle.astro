---
---

<button class="theme-toggle" aria-label="Toggle dark mode" type="button">
  <span class="theme-toggle__icon theme-toggle__icon--light" aria-hidden="true">&#9788;</span>
  <span class="theme-toggle__icon theme-toggle__icon--dark" aria-hidden="true">&#9790;</span>
</button>

<style>
  .theme-toggle {
    background: none;
    border: 1px solid var(--color-border);
    border-radius: 999px;
    padding: 0.4rem 0.6rem;
    cursor: pointer;
    font-size: 1.1rem;
    color: var(--color-text);
    transition: background 0.15s ease;
  }
  .theme-toggle:hover {
    background: var(--color-surface);
  }
  .theme-toggle__icon--dark { display: none; }
  [data-theme="dark"] .theme-toggle__icon--light { display: none; }
  [data-theme="dark"] .theme-toggle__icon--dark { display: inline; }
</style>

<script>
  const toggle = document.querySelector('.theme-toggle');
  const html = document.documentElement;

  function getTheme(): string {
    return localStorage.getItem('theme') || 'auto';
  }

  function applyTheme(theme: string) {
    if (theme === 'dark') {
      html.setAttribute('data-theme', 'dark');
    } else if (theme === 'light') {
      html.setAttribute('data-theme', 'light');
    } else {
      html.removeAttribute('data-theme');
    }
  }

  applyTheme(getTheme());

  toggle?.addEventListener('click', () => {
    const current = getTheme();
    let next: string;
    if (current === 'auto') {
      next = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'light' : 'dark';
    } else {
      next = current === 'dark' ? 'light' : 'dark';
    }
    localStorage.setItem('theme', next);
    applyTheme(next);
  });
</script>
